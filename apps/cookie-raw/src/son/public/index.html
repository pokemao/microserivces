<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>son</title>
</head>
<body>
  <h1>Son</h1>
  <p>
    这个页面会作为一个<strong>iframe</strong>嵌入到father页面中。
  </p>
  <p>
    用于测试父子页面域名不同的时候, 父页面打开的时候，iframe能否给后端发送cookie。
  </p>
  <button>click</button>
  <script>
    document.cookie = 'name=woaini;samesite=none;secure;Partitioned';
    const button = document.querySelector('button');
    button.addEventListener('click', async () => {
      // const res = await document.requestStorageAccess();
      // console.log(res);

      fetch('https://172.24.221.36:4444/', {
        credentials: 'include' // 允许发送 Cookie
      }).then(res => {
        console.log(res)
      })
    })
  </script>
</body>
</html>
